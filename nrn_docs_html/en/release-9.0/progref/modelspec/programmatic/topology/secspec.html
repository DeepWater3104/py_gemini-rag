

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Section and Segment Selection &mdash; NEURON  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/tabs.css?v=4c969af8" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/custom.css?v=6933245a" />

  
      <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../_static/tabs.js?v=3ee01567"></script>
      <script src="../../../../_static/design-tabs.js?v=f930bc37"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <script src="../../../../_static/js/versions.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="SectionList" href="seclist.html" />
    <link rel="prev" title="Conceptual Overview of Sections" href="geometry.html" /> 
<script async type="text/javascript" src="/_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="nrn" /><meta name="readthedocs-version-slug" content="release-9.0" /><meta name="readthedocs-resolver-filename" content="/progref/modelspec/programmatic/topology/secspec.html" /><meta name="readthedocs-http-status" content="200" /></head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            NEURON
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Building:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../cmake_doc/options.html">CMake Build Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/developer.html">Developer Builds</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../videos/index.html">Training videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../guide/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../courses/exercises2018.html">NEURON Course Exercises</a></li>
<li class="toctree-l1"><a class="reference external" href="https://neuron.yale.edu/phpBB">The NEURON forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../publications.html">Publications about NEURON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../publications-using-neuron.html">Publications using NEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NEURON scripting:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../scripting.html">Running Python and HOC scripts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">NEURON Programmer’s Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#quick-links">Quick Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#basic-programming">Basic Programming</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../index.html#model-specification">Model Specification</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../guitools.html">Model Specification GUI Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../programmatic.html">Programmatic Model Specification</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../topology.html">Topology</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ions.html">Ions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mechanisms.html">Dynamics (Channels, etc…)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../rxd.html">Basic Reaction-Diffusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../network.html">Networks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../electrod.html">Electrode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mechtype.html">MechanismType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ste.html">StateTransitionEvent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../obsoletestimuli.html">Obsolete Stimuli</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#simulation-control">Simulation Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#visualization">Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../index.html#analysis">Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../otherscripting.html">Other scripting languages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/index.html">Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rxd-tutorials/index.html">Python RXD tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../coreneuron/index.html">CoreNEURON</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">NMOD Language:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../nmodl/language.html">Language Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../nmodl/transpiler/index.html">About the NMODL transpiler</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../scm/index.html">NEURON SCM and Release</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev/index.html">NEURON Development topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../capi.html">C API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doxygen.html">Internal C/C++ documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Removed Features</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../removed_features.html">Removed Features</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Changelog</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html">NEURON 9.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html#neuron-8-2">NEURON 8.2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html#neuron-8-1">NEURON 8.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html#neuron-8-0">NEURON 8.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html#contributors">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../changelog.html#feedback-help">Feedback / Help</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">NEURON</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">NEURON Programmer’s Reference</a></li>
          <li class="breadcrumb-item"><a href="../../programmatic.html">Programmatic Model Specification</a></li>
          <li class="breadcrumb-item"><a href="../topology.html">Topology</a></li>
      <li class="breadcrumb-item active">Section and Segment Selection</li>
<li class="wy-breadcrumbs-aside">
    
    
</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/progref/modelspec/programmatic/topology/secspec.rst.txt" rel="nofollow"> View page source</a>
      </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a href="#pop_section" title="Link to this definition">pop_section</a> &middot; <a href="#push_section" title="Link to this definition">push_section</a></p><section id="section-and-segment-selection">
<span id="currentlyaccessedsection"></span><span id="secspec"></span><h1>Section and Segment Selection<a class="headerlink" href="#section-and-segment-selection" title="Link to this heading"></a></h1>
<section id="dot-notation-for-properties">
<h2>Dot notation for properties<a class="headerlink" href="#dot-notation-for-properties" title="Link to this heading"></a></h2>
<p>Since sections share property names eg. a length called <a class="reference internal" href="geometry.html#L" title="L"><code class="xref py py-data docutils literal notranslate"><span class="pre">L</span></code></a>
it is always necessary to specify <em>which</em> section is being discussed.</p>
<p>There are three methods of specifying which section a property refers to (with each being
compact in some contexts and cumbersome in others). They are given
below in order of precedence (highest first).</p>
<p><strong>Dot notation</strong></p>
<p>This takes precedence over the other methods and
is described by the syntax <code class="samp docutils literal notranslate"><em><span class="pre">sectionname</span></em><span class="pre">.varname</span></code>.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">Python</label><div class="tab-content docutils">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dendrite</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="n">dendrite</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">L</span> <span class="o">+</span> <span class="n">dendrite</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">L</span>
<span class="n">axon</span><span class="o">.</span><span class="n">v</span> <span class="o">=</span> <span class="n">soma</span><span class="o">.</span><span class="n">v</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soma</span><span class="o">.</span><span class="n">gnabar</span><span class="p">)</span>
<span class="n">axon</span><span class="o">.</span><span class="n">nseg</span> <span class="o">*=</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">HOC</label><div class="tab-content docutils">
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>dendrite[2].L = dendrite[1].L + dendrite[0].L
axon.v = soma.v
print soma.gnabar
axon.nseg = 3*axon.nseg
</pre></div>
</div>
</div>
</div>
<p>This notation is necessary when one needs to refer to more than
one section within a single statement.</p>
<p><strong>Stack of sections</strong></p>
<p>Both HOC and Python use a section stack, but they work differently:</p>
<ul class="simple">
<li><p><strong>In HOC</strong>: The section at the top of the stack is automatically used as the default for range variables when no explicit section is specified. The syntax <code class="docutils literal notranslate"><span class="pre">sectionname</span> <span class="pre">{stmt}</span></code> temporarily pushes a section onto the stack for the duration of <code class="docutils literal notranslate"><span class="pre">stmt</span></code>.</p></li>
<li><p><strong>In Python</strong>: The section stack exists but there is no automatic default behavior for range variables. You can query the top of the stack with <code class="docutils literal notranslate"><span class="pre">n.cas()</span></code> and explicitly manipulate it with <code class="docutils literal notranslate"><span class="pre">push_section()</span></code> and <code class="docutils literal notranslate"><span class="pre">pop_section()</span></code>, but this is rarely needed. Most of the time, you</p></li>
</ul>
<p>can specify <cite>sec=</cite> in function calls to NEURON to specify sections to work on; this temporarily
puts the specified section at the top of the stack for the function call and pops it off after.</p>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">HOC</label><div class="tab-content docutils">
<p>The syntax</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sectionname {stmt}
</pre></div>
</div>
<p>means that the currently selected section during the
execution of <em>stmt</em>
is <em>sectionname</em>. This method is the most useful for
programming since the user has explicit control over
the scope of the section and can set several range variables.
Notice that after the <em>stmt</em> is executed the currently selected
section reverts
to the name (if any) it had before <em>sectionname</em> was seen. The
programmer is allowed to
nest these statements to any level.</p>
<p>Avoid the error:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>soma L=10 diam=10
</pre></div>
</div>
<p>which sets <code class="docutils literal notranslate"><span class="pre">soma.L</span></code>, then pops the section stack and sets <a class="reference internal" href="geometry.html#diam" title="diam"><code class="xref py py-data docutils literal notranslate"><span class="pre">diam</span></code></a>
for whatever section is then on the stack.</p>
<p>It is important that control flow reach the end of <em>stmt</em> in order to
automatically pop the section stack. Therefore, one cannot use
the <code class="docutils literal notranslate"><span class="pre">continue</span></code>, <code class="docutils literal notranslate"><span class="pre">break</span></code>, or <code class="docutils literal notranslate"><span class="pre">return</span></code> statements in <em>stmt</em>.</p>
<p>Looping over sets of sections is done most often with the <code class="docutils literal notranslate"><span class="pre">forall</span></code> and <code class="docutils literal notranslate"><span class="pre">forsec</span></code>
commands (see below).</p>
<p>In HOC, the syntax</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>access sectionname
</pre></div>
</div>
<p>defines a default section name to be the currently selected section when the
first two methods (dot notation and section stack) are not in effect. There is often a conceptually
privileged section which gets most of the use and it is useful to
declare that as the default section. e.g.,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>access soma
</pre></div>
</div>
<p>With this, one can, with a minimum of typing, get values of voltage, etc
at the command line level.
More precisely, it <em>replaces</em> the top of the section stack with the
indicated section and so will be the permanent default section only if
the section stack is empty or has only one section in it.</p>
<p>In general, this statement should only be used once to give default access
to a privileged section. It’s bad programming practice to change the
default access within anything other than an initialization procedure.
The “<code class="docutils literal notranslate"><span class="pre">sec</span> <span class="pre">{</span> <span class="pre">stmt</span> <span class="pre">}</span></code>” form is almost always the right way to
use the section stack.</p>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create a, b, c, d
access a
print secname()
b {
        print secname()
        access c        // not recommended. The &quot;go_to&quot; of sections.
        print secname()
        d {print secname()}
        print secname()
} // because the stack has more than one section, c is popped off
print secname()     // and the second &quot;access&quot; was not permanent!
</pre></div>
</div>
</div></blockquote>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Python</label><div class="tab-content docutils">
<p>In Python, you typically use dot notation for section properties or the <code class="docutils literal notranslate"><span class="pre">sec=</span></code> keyword argument
for functions. The section stack can be manipulated explicitly with <code class="docutils literal notranslate"><span class="pre">n.push_section()</span></code> and
<code class="docutils literal notranslate"><span class="pre">n.pop_section()</span></code>, but this is rarely necessary and not recommended except as a last resort.</p>
<p>The current top of the section stack can be queried with <code class="docutils literal notranslate"><span class="pre">n.cas()</span></code>, but unlike HOC,
this doesn’t automatically apply to range variables - you must be explicit about which
section you’re referencing.</p>
<p>There is no explicit notion of a section object in HOC but a similar
effect can be obtained with the <a class="reference internal" href="secref.html#SectionRef" title="SectionRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionRef</span></code></a> class.</p>
<p>Many NEURON functions refer to a specific Section. In recent versions of NEURON,
most of these either are available as section methods or take a section or segment
directly. For older code or for the remaining exceptions, the active section may
be specified using a <code class="docutils literal notranslate"><span class="pre">sec=</span></code> keyword argument.</p>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_iclamp</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">IClamp</span><span class="p">(</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">sec</span><span class="o">=</span><span class="n">soma</span><span class="p">)</span>   <span class="c1"># better to use n.IClamp(soma(0.25)) though</span>
<span class="n">num_pts_3d</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">n3d</span><span class="p">(</span><span class="n">sec</span><span class="o">=</span><span class="n">apical</span><span class="p">)</span>         <span class="c1"># could get the same value as an int via apical.n3d()</span>
</pre></div>
</div>
<p>In Python, if no <code class="docutils literal notranslate"><span class="pre">sec=</span></code> keyword argument is specified, functions will use NEURON’s
default Section (sometimes called the <em>currently accessed section</em>),
which can be identified via <code class="docutils literal notranslate"><span class="pre">n.cas()</span></code>.
The default Section is controlled by the section stack; it is initially
the first Section created but entries may be pushed onto or popped off of the
stack by <a class="reference internal" href="#push_section" title="push_section"><code class="xref py py-func docutils literal notranslate"><span class="pre">push_section()</span></code></a> and <a class="reference internal" href="#pop_section" title="pop_section"><code class="xref py py-func docutils literal notranslate"><span class="pre">pop_section()</span></code></a>. <em>Use this only as a last resort.</em></p>
<p>However, unlike HOC, range variables in Python do not automatically use the section
stack - you must always be explicit about which section you’re referencing.</p>
</div>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="pop_section">
<span class="sig-name descname"><span class="pre">pop_section</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pop_section" title="Link to this definition"></a></dt>
<dd><div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">Python</label><div class="tab-content docutils">
<dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">n.pop_section()</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Take the currently accessed section off the section stack. This can only be used after
a function which pushes a section on the section stack such as
<code class="docutils literal notranslate"><span class="pre">point_process.getloc()</span></code>.</p>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">neuron</span><span class="w"> </span><span class="kn">import</span> <span class="n">n</span>

<span class="n">soma</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span><span class="s1">&#39;soma&#39;</span><span class="p">)</span>
<span class="n">apical</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span><span class="s1">&#39;apical&#39;</span><span class="p">)</span>
<span class="n">stims</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">IClamp</span><span class="p">(</span><span class="n">soma</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="mf">4.</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)]</span> <span class="o">+</span> <span class="p">[</span><span class="n">n</span><span class="o">.</span><span class="n">IClamp</span><span class="p">(</span><span class="n">apical</span><span class="p">(</span><span class="mf">0.5</span><span class="p">))]</span>
<span class="k">for</span> <span class="n">stim</span> <span class="ow">in</span> <span class="n">stims</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">stim</span><span class="o">.</span><span class="n">get_loc</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;location of </span><span class="si">{</span><span class="n">stim</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="n">n</span><span class="o">.</span><span class="n">secname</span><span class="p">()</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">x</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
    <span class="n">n</span><span class="o">.</span><span class="n">pop_section</span><span class="p">()</span>
</pre></div>
</div>
<p>(Note: in this example as <code class="docutils literal notranslate"><span class="pre">nseg=1</span></code>, the current clamps will either be at position 0, 0.5, or 1.)</p>
<p>(Note: a more Pythonic way to get the location of the point-process <code class="docutils literal notranslate"><span class="pre">stim</span></code> is to use <code class="docutils literal notranslate"><span class="pre">seg</span> <span class="pre">=</span> <span class="pre">stim.get_segment()</span></code>,
but this is shown as an example of using <code class="docutils literal notranslate"><span class="pre">n.pop_section()</span></code>.)</p>
</div></blockquote>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">HOC</label><div class="tab-content docutils">
<dl class="simple">
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">pop_section()</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Take the currently accessed section off the section stack. This can only be used after
a function which pushes a section on the section stack such as
<code class="docutils literal notranslate"><span class="pre">point_process.getloc()</span></code>.</p>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create soma[5]
objref stim[5]
for i=0,4 soma[i] stim[i] = new IClamp(i/4)
for i=0,4 {
        x = stim[i].get_loc()
        printf(&quot;location of %s is %s(%g)\n&quot;, stim[i], secname(), x)
        pop_section()
}
</pre></div>
</div>
</div></blockquote>
</div>
</div>
</dd></dl>

<hr class="docutils" />
<dl class="py function">
<dt class="sig sig-object py" id="push_section">
<span class="sig-name descname"><span class="pre">push_section</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#push_section" title="Link to this definition"></a></dt>
<dd><div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">Python</label><div class="tab-content docutils">
<dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">n.push_section(number)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">n.push_section(section_name)</span></code></p>
</dd>
<dt>Description:</dt><dd><p>This function, along with <a class="reference internal" href="#pop_section" title="pop_section"><code class="xref py py-func docutils literal notranslate"><span class="pre">pop_section()</span></code></a> should only be used as a last resort.
It will place a specified section on the top of the section stack,
becoming the current section to which all operations apply. It is
probably always better to use <a class="reference internal" href="secref.html#SectionRef" title="SectionRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionRef</span></code></a>
or <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> .</p>
<p>In Python, manipulating the section stack only affects what <code class="docutils literal notranslate"><span class="pre">n.cas()</span></code> returns and some internal functions -
range variables must still be explicitly specified.</p>
<dl class="simple">
<dt><code class="samp docutils literal notranslate"><span class="pre">push_section(</span><em><span class="pre">number</span></em><span class="pre">)</span></code></dt><dd><p>Push the section identified by the number returned by
<code class="docutils literal notranslate"><span class="pre">n.this_section()</span></code>, etc. which you desire to be the currently accessed
section. Any section pushed must have a corresponding <code class="docutils literal notranslate"><span class="pre">n.pop_section()</span></code>
later or else the section stack will be corrupted. The number is
not guaranteed to be the same across separate invocations of NEURON.</p>
</dd>
<dt><code class="samp docutils literal notranslate"><span class="pre">push_section(</span><em><span class="pre">section_name</span></em><span class="pre">)</span></code></dt><dd><p>Push the section identified by the name obtained
from sectionname(<em>strdef</em>). Note: at this time the implementation
iterates over all sections to find the proper one; so do not use
in loops.</p>
</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">neuron</span><span class="w"> </span><span class="kn">import</span> <span class="n">n</span>

<span class="n">soma</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span><span class="s1">&#39;soma&#39;</span><span class="p">)</span>
<span class="n">apical</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">Section</span><span class="p">(</span><span class="s1">&#39;apical&#39;</span><span class="p">)</span>

<span class="c1"># get a number to allow pushing by number</span>
<span class="n">soma_id</span> <span class="o">=</span> <span class="n">n</span><span class="o">.</span><span class="n">this_section</span><span class="p">(</span><span class="n">sec</span><span class="o">=</span><span class="n">soma</span><span class="p">)</span>

<span class="c1"># push by name</span>
<span class="n">n</span><span class="o">.</span><span class="n">push_section</span><span class="p">(</span><span class="s1">&#39;apical&#39;</span><span class="p">)</span>

<span class="c1"># push by number</span>
<span class="n">n</span><span class="o">.</span><span class="n">push_section</span><span class="p">(</span><span class="n">soma_id</span><span class="p">)</span>

<span class="c1"># RuntimeError -- no such section</span>
<span class="n">n</span><span class="o">.</span><span class="n">push_section</span><span class="p">(</span><span class="s1">&#39;basal&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">HOC</label><div class="tab-content docutils">
<dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">push_section(number)</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">push_section(section_name)</span></code></p>
</dd>
<dt>Description:</dt><dd><p>This function, along with <code class="docutils literal notranslate"><span class="pre">pop_section()</span></code> should only be used as a last resort.
It will place a specified section on the top of the section stack,
becoming the current section to which all operations apply. It is
probably always better to use <a class="reference internal" href="secref.html#SectionRef" title="SectionRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionRef</span></code></a>
or <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> .</p>
<p>In HOC, manipulating the section stack affects the default section for range variables.</p>
<dl class="simple">
<dt><code class="samp docutils literal notranslate"><span class="pre">push_section(</span><em><span class="pre">number</span></em><span class="pre">)</span></code></dt><dd><p>Push the section identified by the number returned by
<code class="docutils literal notranslate"><span class="pre">this_section()</span></code>, etc. which you desire to be the currently accessed
section. Any section pushed must have a corresponding <code class="docutils literal notranslate"><span class="pre">pop_section()</span></code>
later or else the section stack will be corrupted. The number is
not guaranteed to be the same across separate invocations of NEURON.</p>
</dd>
<dt><code class="samp docutils literal notranslate"><span class="pre">push_section(</span><em><span class="pre">section_name</span></em><span class="pre">)</span></code></dt><dd><p>Push the section identified by the name obtained
from sectionname(<em>strdef</em>). Note: at this time the implementation
iterates over all sections to find the proper one; so do not use
in loops.</p>
</dd>
</dl>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create soma, apical

// get a number to allow pushing by number
soma { soma_id = this_section() }

// push by name
push_section(&quot;apical&quot;)

// push by number
push_section(soma_id)
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="secref.html#SectionRef" title="SectionRef"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionRef</span></code></a></p>
</div>
</dd></dl>

</section>
<hr class="docutils" />
<section id="looping-over-sections-hoc-only">
<h2>Looping over sections (HOC only)<a class="headerlink" href="#looping-over-sections-hoc-only" title="Link to this heading"></a></h2>
<p>HOC provides several keywords for iterating over sections that have no direct Python equivalents.
In Python, section iteration is typically done using <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> objects or by iterating
over lists of sections (such as <code class="docutils literal notranslate"><span class="pre">soma.wholetree()</span></code> or <code class="docutils literal notranslate"><span class="pre">n.allsec()</span></code>) directly.</p>
<p id="hoc-keyword-forall"><span id="index-0"></span><strong>forall</strong></p>
<blockquote>
<div><dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">stmt</span></code></p>
</dd>
<dt>Description:</dt><dd><p>Loops over all sections, successively making each section the currently
accessed section.</p>
<p>Within an object, <code class="docutils literal notranslate"><span class="pre">forall</span></code> refers to all the sections
declared in the object. This is generally the right thing to do when a template
creates sections but is inconvenient when a template is constructed which
needs to compute using sections external to it. In this case, one can pass a collection
of sections into a template function as a <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> object argument.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">forall</span></code> is relatively slow,
especially when used in conjunction with <a class="reference internal" href="../topology.html#issection" title="issection"><code class="xref py py-func docutils literal notranslate"><span class="pre">issection()</span></code></a>
and <a class="reference internal" href="../topology.html#ismembrane" title="ismembrane"><code class="xref py py-func docutils literal notranslate"><span class="pre">ismembrane()</span></code></a> selectors. If you are often iterating over the same
sets it is much faster to keep the sets in <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a> objects and use
the much faster <code class="docutils literal notranslate"><span class="pre">forsec</span></code> command.</p>
<p>The iteration sequence order is undefined but will remain the same for
a given sequence of <code class="docutils literal notranslate"><span class="pre">create</span></code> statements.</p>
</dd>
</dl>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create soma, axon, dend[3]
forall {
    print secname()
}
</pre></div>
</div>
<p>prints the names of all the sections which have been created.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>soma
axon
dend[0]
dend[1]
dend[2]
</pre></div>
</div>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="docutils literal notranslate"><span class="pre">forsec</span></code>, <code class="docutils literal notranslate"><span class="pre">ifsec</span></code>, <a class="reference internal" href="../topology.html#issection" title="issection"><code class="xref py py-func docutils literal notranslate"><span class="pre">issection()</span></code></a>, <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a>, <a class="reference internal" href="../topology.html#ismembrane" title="ismembrane"><code class="xref py py-func docutils literal notranslate"><span class="pre">ismembrane()</span></code></a></p>
</div>
</div></blockquote>
<hr class="docutils" />
<p id="hoc-keyword-ifsec"><span id="index-1"></span><strong>ifsec</strong></p>
<blockquote>
<div><dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">ifsec</span> <span class="pre">string</span> <span class="pre">stmt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ifsec</span> <span class="pre">sectionlist</span> <span class="pre">stmt</span></code></p>
</dd>
</dl>
<p>Description:</p>
<blockquote>
<div><dl class="simple">
<dt>ifsec string stmt</dt><dd><p>Executes stmt if string is contained in the name of the currently
accessed section.  equivalent to <code class="samp docutils literal notranslate"><span class="pre">if(issection(</span><em><span class="pre">string</span></em><span class="pre">))</span></code> stmt
Note that the regular expression semantics is not the same as that
used by issection. To get an exact match use
ifsec ^string$</p>
</dd>
<dt>ifsec sectionlist stmt</dt><dd><p>Executes stmt if the currently accessed section is in the sectionlist.</p>
</dd>
</dl>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="docutils literal notranslate"><span class="pre">forsec</span></code>, <a class="reference internal" href="seclist.html#SectionList" title="SectionList"><code class="xref py py-class docutils literal notranslate"><span class="pre">SectionList</span></code></a>, <a class="reference internal" href="../topology.html#issection" title="issection"><code class="xref py py-func docutils literal notranslate"><span class="pre">issection()</span></code></a></p>
</div>
</div></blockquote>
<hr class="docutils" />
<span id="index-2"></span><dl id="hoc-keyword-forsec">
<dt><strong>forsec</strong></dt><dd><dl>
<dt>Syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">forsec</span> <span class="pre">string</span> <span class="pre">stmt</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">forsec</span> <span class="pre">sectionlist</span> <span class="pre">stmt</span></code></p>
</dd>
</dl>
<p>Description:</p>
<blockquote>
<div><dl class="simple">
<dt>forsec string stmt</dt><dd><p>equivalent to <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">ifsec</span> <span class="pre">string</span> <span class="pre">stmt</span></code> but faster.
Note that forsec string is equivalent to
<code class="samp docutils literal notranslate"><span class="pre">forall</span> <span class="pre">if</span> <span class="pre">(issection(</span><em><span class="pre">string</span></em><span class="pre">))</span> <span class="pre">stmt</span></code></p>
</dd>
<dt>forsec sectionlist</dt><dd><p>equivalent to <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">ifsec</span> <span class="pre">sectionlist</span> <span class="pre">stmt</span></code> but very fast.</p>
</dd>
</dl>
<p>These provide a very efficient iteration over the list of sections.</p>
</div></blockquote>
<p>Example:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create soma, dend[3], axon
forsec &quot;a&quot; print secname()
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>create soma, dend[3], axon
objref sl
sl = new SectionList()
for (i = 2; i &gt;= 0; i = i - 1) dend[i] sl.append()
forsec sl print secname()
</pre></div>
</div>
</div></blockquote>
</dd>
</dl>
<hr class="docutils" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="geometry.html" class="btn btn-neutral float-left" title="Conceptual Overview of Sections" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="seclist.html" class="btn btn-neutral float-right" title="SectionList" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Duke, Yale and the Blue Brain Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>